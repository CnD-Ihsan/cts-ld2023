<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>CT Sabah Lucky Draw 2023</title>

        <!-- Fonts -->
        <link href="https://fonts.bunny.net/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Pinyon Script' rel='stylesheet'>
        <link href="{{asset('css/bootstrap.min.css')}}" rel="stylesheet">
        <link href="{{asset('css/materialdesignicons.min.css')}}" rel="stylesheet">

        <!-- Styles -->
        <style>
            /*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}a{background-color:transparent}[hidden]{display:none}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}a{color:inherit;text-decoration:inherit}svg,video{display:block;vertical-align:middle}video{max-width:100%;height:auto}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-gray-100{--bg-opacity:1;background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity))}.border-gray-200{--border-opacity:1;border-color:#edf2f7;border-color:rgba(237,242,247,var(--border-opacity))}.border-t{border-top-width:1px}.flex{display:flex}.grid{display:grid}.hidden{display:none}.items-center{align-items:center}.justify-center{justify-content:center}.font-semibold{font-weight:600}.h-5{height:1.25rem}.h-8{height:2rem}.h-16{height:4rem}.text-sm{font-size:.875rem}.text-lg{font-size:1.125rem}.leading-7{line-height:1.75rem}.mx-auto{margin-left:auto;margin-right:auto}.ml-1{margin-left:.25rem}.mt-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.ml-2{margin-left:.5rem}.mt-4{margin-top:1rem}.ml-4{margin-left:1rem}.mt-8{margin-top:2rem}.ml-12{margin-left:3rem}.-mt-px{margin-top:-1px}.max-w-6xl{max-width:72rem}.min-h-screen{min-height:100vh}.overflow-hidden{overflow:hidden}.p-6{padding:1.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.pt-8{padding-top:2rem}.fixed{position:fixed}.relative{position:relative}.top-0{top:0}.right-0{right:0}.shadow{box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.text-center{text-align:center}.text-gray-200{--text-opacity:1;color:#edf2f7;color:rgba(237,242,247,var(--text-opacity))}.text-gray-300{--text-opacity:1;color:#e2e8f0;color:rgba(226,232,240,var(--text-opacity))}.text-gray-400{--text-opacity:1;color:#cbd5e0;color:rgba(203,213,224,var(--text-opacity))}.text-gray-500{--text-opacity:1;color:#a0aec0;color:rgba(160,174,192,var(--text-opacity))}.text-gray-600{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.text-gray-900{--text-opacity:1;color:#1a202c;color:rgba(26,32,44,var(--text-opacity))}.underline{text-decoration:underline}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.w-5{width:1.25rem}.w-8{width:2rem}.w-auto{width:auto}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}@media (min-width:640px){.sm\:rounded-lg{border-radius:.5rem}.sm\:block{display:block}.sm\:items-center{align-items:center}.sm\:justify-start{justify-content:flex-start}.sm\:justify-between{justify-content:space-between}.sm\:h-20{height:5rem}.sm\:ml-0{margin-left:0}.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:pt-0{padding-top:0}.sm\:text-left{text-align:left}.sm\:text-right{text-align:right}}@media (min-width:768px){.md\:border-t-0{border-top-width:0}.md\:border-l{border-left-width:1px}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:1024px){.lg\:px-8{padding-left:2rem;padding-right:2rem}}@media (prefers-color-scheme:dark){.dark\:bg-gray-800{--bg-opacity:1;background-color:#2d3748;background-color:rgba(45,55,72,var(--bg-opacity))}.dark\:bg-gray-900{--bg-opacity:1;background-color:#1a202c;background-color:rgba(26,32,44,var(--bg-opacity))}.dark\:border-gray-700{--border-opacity:1;border-color:#4a5568;border-color:rgba(74,85,104,var(--border-opacity))}.dark\:text-white{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.dark\:text-gray-400{--text-opacity:1;color:#cbd5e0;color:rgba(203,213,224,var(--text-opacity))}.dark\:text-gray-500{--tw-text-opacity:1;color:#6b7280;color:rgba(107,114,128,var(--tw-text-opacity))}}
        </style>
        
        <style>
            html {
                margin: 0;
                overflow: hidden;
            }

            body {
                background: #000;
                background-image: url('img/wp-mas.jpg');
                background-size: cover;
                background-repeat: no-repeat;
            }

            .dGif {
                min-width: 250px;
                min-height: 250px;
                border-radius: 5%;
            }
            /* #ffd700 */
            /* #3399ff */

            h1, h2{
                text-align: center;
                color: white;
            }

            .tablewrapper{
                position: absolute;
                z-index: 2;
                width: 1920px;
                height: 1080px;
                left: 6%;
                top: 6%;
                opacity: ;
            }

            .gq{
                margin: 2px;
                width:290px;
                height:290px;
            }

            /* Ini adalah Spinning Card */
            .blue {
                background: #5cele6;
                border-radius: 4px;
                display: flex;
                align-items: center;
                justify-content: center;
                /* box-shadow: 0 4px 7px 0 rgb(211, 247, 248), 0 6px 15px 0 rgb(189, 243, 245); */
                animation: rotate 5s cubic-bezier(0.27, 0.065, 0.15, 0.435);
                /* animation: rotate 3s cubic-bezier(0.33, 0.03, 0.03, 0.13); */
            }
            

            .gold {
                background: #5cele6;
                display: flex;
                align-items: center;
                justify-content: center;
                /* box-shadow: 0 4px 7px 0 rgb(211, 247, 248), 0 6px 15px 0 rgb(189, 243, 245); */
                /* animation: rotate 5s cubic-bezier(0.54, 0.13, 0.3, 0.87); */
                animation: gold_rotate 5s cubic-bezier(0.27, 0.065, 0.15, 0.435) 2.5s;
                /* opacity: 0;
                transition: opacity 1s;
                transition-delay: 5s; */
            }

            @keyframes rotate {
            0% {
                transform: rotateY(0turn);
            }
            100% {
                transform: rotateY(10turn);
            }
            }

            @keyframes gold_rotate {
            0% {
                transform: rotateY(0turn);
            }
            100% {
                transform: rotateY(50turn);
            }
            }
            
            /* Shake Animation */

            .shake_gq {
                animation: shake 0.5s;
                animation-iteration-count: 5;
            }

            @keyframes shake {
                0% { transform: translate(1px, 1px) rotate(0deg); }
                10% {
                transform: translate(-1px, -2px) rotate(-2deg);
                background-color: #774212;}
                20% { transform: translate(-3px, 0px) rotate(2deg); }
                30% { transform: translate(3px, 2px) rotate(0deg); }
                40% { transform: translate(1px, -1px) rotate(2deg); }
                50% { transform: translate(-1px, 2px) rotate(-2deg); }
                60% { transform: translate(-3px, 1px) rotate(0deg); }
                70% { transform: translate(3px, 1px) rotate(-2deg); }
                80% { transform: translate(-1px, -1px) rotate(2deg); }
                90% { transform: translate(1px, 2px) rotate(0deg); }
                100% { transform: translate(1px, -2px) rotate(-2deg); }
            }

            .numbers {
                height: 20%;
                color: floralwhite;
                text-align: center;
            }

            /* Here's some environment setup,
            scroll down for the interesting parts */

            @import url('https://fonts.googleapis.com/css?family=Lato:200');

            .animated-box {
                font-family: 'Lato';
                color: #ffffff;
                padding: 0px;
                text-align: center;
                border-radius: 4px;
                background: linear-gradient(0deg, black, gold 70%) no-repeat;
                opacity: 0.9;
            }

            .animated-box h1 {
            font-weight: 200;
            font-size: 40px;
            text-transform: uppercase;
            }

            .animated-box p {
            font-weight: 200;
            }

            /* The animation starts here */
            .animated-box {
            position: relative;
            }

            .animated-box:after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 4px;
            background: linear-gradient(120deg, rgb(212, 214, 179), white, gold);
            background-size: 300% 300%;
            clip-path: polygon(0% 100%, 3px 100%, 3px 3px, calc(100% - 3px) 3px, calc(100% - 3px) calc(100% - 3px), 3px calc(100% - 3px), 3px 100%, 100% 100%, 100% 0%, 0% 0%);
            }

            .animated-box.in:after {
            animation: frame-enter 1s forwards ease-in-out reverse, gradient-animation 4s ease-in-out infinite;
            }

            /* motion */
            @keyframes gradient-animation {
            0% {
                background-position: 15% 0%;
            }
            50% {
                background-position: 85% 100%;
            }
            100% {
                background-position: 15% 0%;
            }
            }

            @keyframes frame-enter {
            0% {
                clip-path: polygon(0% 100%, 3px 100%, 3px 3px, calc(100% - 3px) 3px, calc(100% - 3px) calc(100% - 3px), 3px calc(100% - 3px), 3px 100%, 100% 100%, 100% 0%, 0% 0%);
            }
            25% {
                clip-path: polygon(0% 100%, 3px 100%, 3px 3px, calc(100% - 3px) 3px, calc(100% - 3px) calc(100% - 3px), calc(100% - 3px) calc(100% - 3px), calc(100% - 3px) 100%, 100% 100%, 100% 0%, 0% 0%);
            }
            50% {
                clip-path: polygon(0% 100%, 3px 100%, 3px 3px, calc(100% - 3px) 3px, calc(100% - 3px) 3px, calc(100% - 3px) 3px, calc(100% - 3px) 3px, calc(100% - 3px) 3px, 100% 0%, 0% 0%);
            }
            75% {
                -webkit-clip-path: polygon(0% 100%, 3px 100%, 3px 3px, 3px 3px, 3px 3px, 3px 3px, 3px 3px, 3px 3px, 3px 0%, 0% 0%);
            }
            100% {
                -webkit-clip-path: polygon(0% 100%, 3px 100%, 3px 100%, 3px 100%, 3px 100%, 3px 100%, 3px 100%, 3px 100%, 3px 100%, 0% 100%);
            }
            }

            #confetti{
                height: 100%;
                left: 0px;
                position: fixed;
                top: 0px;
                width: 100%;
                z-index: 30;
                cursor: url('img/mask-cur.png'), grabbing;
            }

            .numGif{
                width: 90px !important;
                height: 90px !important;
                opacity: 0.8;
            }
            
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% {
                    -moz-transform: translateY(0);
                    -ms-transform: translateY(0);
                    -webkit-transform: translateY(0);
                    transform: translateY(0);
                }
                40% {
                    -moz-transform: translateY(-30px);
                    -ms-transform: translateY(-30px);
                    -webkit-transform: translateY(-30px);
                    transform: translateY(-30px);
                }
                60% {
                    -moz-transform: translateY(-15px);
                    -ms-transform: translateY(-15px);
                    -webkit-transform: translateY(-15px);
                    transform: translateY(-15px);
                }
            }

            .down-arrow {
                position: absolute;
                width: 100%;
                /* font-size: 6em; */
                top: 10vh;
                left: 0vh;
                color: #00ccff;
                animation: bounce 2s infinite;
                text-align: center;
            }

            .flash{ 
                position:fixed; 
                top:0;
                left:0;
                width:100%;
                height:100%;
                background-color:#ffd700;
                z-index: 20;
            }

            #curtainsWrapper	{width:100%; height:100%; position:absolute; z-index:10; margin:0; padding:0;}
            .curtain	{
                background-color: #026873;
                background-image: url("https://images.vexels.com/media/users/17482/101168/preview2/01bdac45c37aff22f75230abf3f019d4-red-curtain-background.png");
                background-repeat: no-repeat;
                background-size: cover;
                position:absolute;
            }
            .curtain-left, .curtain-right	{width:50%; display:inline-block; height:100%; margin:0; padding:0;}
            .curtain-left {left:0%;}
            .curtain-right	{width:50%; right:0%;}

            a {
                z-index: 1000 !important;
            }

            /* #### Generated By: http://www.cufonfonts.com #### */

            @font-face {
            font-family: 'RoadRage';
            font-style: normal;
            font-weight: normal;
            src: local('RoadRage'), url('http://coding-dude.com/wp/wp-content/uploads/Road_Rage.woff') format('woff');
            }


            :root{
            font-size:;
            }

            .text{
            position:absolute;
            left:50%;
            top:80%;
            text-align:center;
            transform:translate(-50%,-50%);
            white-space:nowrap;
            }

            .outrun{
            font-family:'Road Rage';
            font-weight:normal;
            font-size: 25px;
            }   

            .glow {
                color: #fff;
                text-align: center;
                -webkit-animation: glow 1s ease-in-out infinite alternate;
                -moz-animation: glow 1s ease-in-out infinite alternate;
                animation: glow 1s ease-in-out infinite alternate;
            }

            @-webkit-keyframes glow {
            from {
                text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e60073, 0 0 40px #e60073, 0 0 50px #e60073, 0 0 60px #e60073, 0 0 70px #e60073;
            }
            to {
                text-shadow: 0 0 20px #fff, 0 0 30px #ff4da6, 0 0 40px #ff4da6, 0 0 50px #ff4da6, 0 0 60px #ff4da6, 0 0 70px #ff4da6, 0 0 80px #ff4da6;
            }
            }

            .spark{
                margin-top:calc( 4vh ) ;
                margin-left:-0.3em;
                line-height:0;
                position:absolute;
                width:37px;
                height:45px;
                z-index:999;
                background-image: url("data:image/svg+xml,%3Csvg viewBox='120 250 1700 1200' width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3C!-- Created with Method Draw - http://github.com/duopixel/Method-Draw/ --%3E%3Cg%3E%3Ctitle%3Ebackground%3C/title%3E%3Crect fill='none' id='canvas_background' height='402' width='182' y='-1' x='-1'/%3E%3Cg display='none' overflow='visible' y='0' x='0' height='100%25' width='100%25' id='canvasGrid'%3E%3Crect fill='url(%23gridpattern)' stroke-width='0' y='0' x='0' height='100%25' width='100%25'/%3E%3C/g%3E%3C/g%3E%3Cg%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cellipse ry='183' rx='5' id='svg_2' cy='197.0375' cx='274.5' stroke-width='0' stroke='%23000' fill='%23fff'/%3E%3Cellipse transform='rotate(90 274.50000000000006,197.03750610351565) ' ry='183' rx='5' id='svg_3' cy='197.0375' cx='274.5' stroke-width='0' stroke='%23000' fill='%23fff'/%3E%3Cellipse stroke='%23000' transform='rotate(126.69925689697266 276.19342041015625,195.4363708496094) ' ry='90.194158' rx='3.223029' id='svg_4' cy='195.43637' cx='276.193439' stroke-width='0' fill='%23fff'/%3E%3Cellipse stroke='%23000' transform='rotate(-134.6077117919922 276.19342041015625,195.43637084960938) ' ry='90.194158' rx='3.223029' id='svg_5' cy='195.43637' cx='276.193439' stroke-width='0' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E");
                filter:blur(0.5px);
                transform:scale(0);
                animation:blip 5s infinite;
                animation-timing-function: ease-in-out;
            }

            .spark-offset{
            }

            .chrome:last-of-type .spark{
            animation-delay:-2.5s;
            }

            @-webkit-keyframes blip {
                0% {transform: scale(0);}
                5% {transform: scale(1.2) rotate(0deg);}
                6% {transform: scale(1) rotate(0deg);}
                8% {transform: scale(1) rotate(180deg);}
                100% {transform: scale(1) rotate(180deg);}
            }

            .neonText {
                text-align: center;
                font-size: 9em;
                margin-bottom: 0;
                margin-top: 0;
                line-height: 1;
                text-decoration: none;
                color: #fff;
                font-family: Pinyon Script;
                animation: yellowNeon 1.5s ease-in-out infinite alternate;
                position: absolute;
                bottom: 10%;
            }

            .slotRow {
                text-align: center;
                position: absolute;
                animation: slide 3s ease-out infinite;
            }

            @keyframes yellowNeon {
                from {
                    text-shadow: 0 0 15px #fff, 0 0 25px #fff, 0 0 35px #fff, 0 0 45px #ffdd1b,
                    0 0 75px #ffdd1b, 0 0 85px #ffdd1b, 0 0 105px #ffdd1b, 0 0 155px #ffdd1b;
                }
                to {
                    text-shadow: 0 0 10px #fff, 0 0 15px #fff, 0 0 20px #fff, 0 0 25px #ffdd1b,
                    0 0 40px #ffdd1b, 0 0 45px #ffdd1b, 0 0 55px #ffdd1b, 0 0 80px #ffdd1b;
                }
            }

            @keyframes orangeNeon {
                from {
                    text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #fff, 0 0 40px #ff9900,
                    0 0 70px #ff9900, 0 0 80px #ff9900, 0 0 100px #ff9900, 0 0 150px #ff9900;
                }
                to {
                    text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #fff, 0 0 20px #ff9900,
                    0 0 35px #ff9900, 0 0 40px #ff9900, 0 0 50px #ff9900, 0 0 75px #ff9900;
                }
            }
            
            * { box-sizing: border-box; }
            
            #backdrop {
                position: fixed;
                right: 0;
                bottom: 0;
                min-width: 100%; 
                min-height: 100%;
            }

            .luckyGift{
                position: absolute;
                bottom: 6%;
                left: 34%;
                z-index: 1;
            }

            .luckyGift img{
                height: 400px;
                width: 400px;
            }

            .luckyNum{
                position: absolute;
                left: 22%;
                bottom: 44%;
                z-index: 1;
                text-shadow: #6e4602 0px 0px 10px;
                /* animation: yellowNeon 1.5s ease-in-out infinite alternate; */
            }
        </style>

    </head>
    <body class="antialiased">
        {{-- <div id="curtainsWrapper">
            <div class="curtain curtain-left"></div>
            <div class="curtain curtain-right"></div>
        </div><!--curtainsWrapper --> --}}
        <div id="confetti"></div>
        <div id="starshine">
            <div class="template shine"></div>
        </div>
        <canvas id="bg"></div></canvas>
        {{-- <div id="vignette"></div> --}}

        <video autoplay muted loop id="backdrop">
            <source src="video/backdrop.mp4" type="video/mp4">
            Mystique Masquerade Backdropd
        </video>
        <div class="tablewrapper" hidden>
            <div class="row justify-content-center">
                {{-- <div class="neonText">Masquerade<br>Night</div> --}}
                {{-- <div class="outrun glow">CTS Lucky Draw 2023</div>    --}}
                    <div class="col-sm-2 mb-4 card bg-transparent border-0">
                        <div class="card-body animated-box in">
                            <div class="card-image"><img id="placeholder0" src="img/prizes/{{ $prize->img }}.png" alt="whut" class="gq mx-auto {{ $prize->type == 'grand' ? 'add_gold grand' : '' }}"></div>
                            <div class="card-text mt-2">
                                {{-- <div id="numVal0" class="" style="font-size: 4rem;" disabled hidden>{{ $user->id }}</div>
                                <div id="numGif0" class=""><img src="img/prize/number1.gif" class="numGif" alt="num"> </div> --}}
                            </div>
                        </div>
                    </div>
                    <input id="img0" name="img0" type="hidden" value="{{ $prize->img }}"/>
                    <input id="winner" name="winner" type="hidden" value="{{ $user->number }}"/>
                    <input id="prizeId" name="prizeId" type="hidden" value="{{ $prize->id }}"/>
            </div>
            {{-- <div class="row justify-content-center">
                <svg id="demo" xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
                    <defs>
                        <lineargradient id="theGradient" gradientUnits="userSpaceOnUse" x1="150" y1="0" x2="150" y2="300">
                        <stop offset="0%" stop-color="#000000"/>
                        <stop offset="25%" stop-color="#fff"/>
                        <stop offset="75%" stop-color="#fff"/>
                        <stop offset="100%" stop-color="#000000"/>
                        </lineargradient>
                    <mask id="theMask">
                    <rect x="0" y="0" width="400" height="400" fill="url(#theGradient)" />  
                    </mask>
                    </defs> 
                    
                    <g mask="url(#theMask)"> 
                    <text id="nodeA0" transform="translate(150 250)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                    <text id="nodeA1" transform="translate(150 -150)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                    </g>
                </svg>
                <svg id="demo" xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
                    <defs>
                        <lineargradient id="theGradient" gradientUnits="userSpaceOnUse" x1="150" y1="0" x2="150" y2="300">
                        <stop offset="0%" stop-color="#000000"/>
                        <stop offset="25%" stop-color="#fff"/>
                        <stop offset="75%" stop-color="#fff"/>
                        <stop offset="100%" stop-color="#000000"/>
                        </lineargradient>
                    <mask id="theMask">
                    <rect x="0" y="0" width="400" height="400" fill="url(#theGradient)" />  
                    </mask>
                    </defs> 
                    
                    <g mask="url(#theMask)"> 
                    <text id="nodeB0" transform="translate(150 250)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                    <text id="nodeB1" transform="translate(150 -150)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                    </g>
                </svg>
                <svg id="demo" xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
                    <defs>
                        <lineargradient id="theGradient" gradientUnits="userSpaceOnUse" x1="150" y1="0" x2="150" y2="300">
                        <stop offset="0%" stop-color="#000000"/>
                        <stop offset="25%" stop-color="#fff"/>
                        <stop offset="75%" stop-color="#fff"/>
                        <stop offset="100%" stop-color="#000000"/>
                        </lineargradient>
                    <mask id="theMask">
                    <rect x="0" y="0" width="400" height="400" fill="url(#theGradient)" />  
                    </mask>
                    </defs> 
                    
                    <g mask="url(#theMask)"> 
                    <text id="nodeC0" transform="translate(150 250)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                    <text id="nodeC1" transform="translate(150 -150)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                    </g>
                </svg>
                <svg id="demo" xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
                    <defs>
                        <lineargradient id="theGradient" gradientUnits="userSpaceOnUse" x1="150" y1="0" x2="150" y2="300">
                        <stop offset="0%" stop-color="#000000"/>
                        <stop offset="25%" stop-color="#fff"/>
                        <stop offset="75%" stop-color="#fff"/>
                        <stop offset="100%" stop-color="#000000"/>
                        </lineargradient>
                    <mask id="theMask">
                    <rect x="0" y="0" width="400" height="400" fill="url(#theGradient)" />  
                    </mask>
                    </defs> 
                    
                    <g mask="url(#theMask)"> 
                    <text id="nodeD0" transform="translate(150 250)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                    <text id="nodeD1" transform="translate(150 -150)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                    </g>
                </svg>
                <svg id="demo" xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
                    <defs>
                        <lineargradient id="theGradient" gradientUnits="userSpaceOnUse" x1="150" y1="0" x2="150" y2="300">
                        <stop offset="0%" stop-color="#000000"/>
                        <stop offset="25%" stop-color="#fff"/>
                        <stop offset="75%" stop-color="#fff"/>
                        <stop offset="100%" stop-color="#000000"/>
                        </lineargradient>
                    <mask id="theMask">
                    <rect x="0" y="0" width="400" height="400" fill="url(#theGradient)" />  
                    </mask>
                    </defs> 
                    
                    <g mask="url(#theMask)"> 
                    <text id="nodeE0" transform="translate(150 250)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                    <text id="nodeE1" transform="translate(150 -150)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                    </g>
                </svg>
            </div> --}}
        </div>

            <div class="luckyNum">
                <div class="row justify-content-center">
                    <svg id="demo" xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
                        <defs>
                            <lineargradient id="theGradient" gradientUnits="userSpaceOnUse" x1="150" y1="0" x2="150" y2="300">
                            <stop offset="0%" stop-color="#000000"/>
                            <stop offset="25%" stop-color="#fff"/>
                            <stop offset="75%" stop-color="#fff"/>
                            <stop offset="100%" stop-color="#000000"/>
                            </lineargradient>
                        <mask id="theMask">
                        <rect x="0" y="0" width="400" height="400" fill="url(#theGradient)" />  
                        </mask>
                        </defs> 
                        
                        <g mask="url(#theMask)"> 
                        <text id="nodeA0" transform="translate(150 250)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                        <text id="nodeA1" transform="translate(150 -150)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                        </g>
                    </svg>
                    <svg id="demo" xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
                        <defs>
                            <lineargradient id="theGradient" gradientUnits="userSpaceOnUse" x1="150" y1="0" x2="150" y2="300">
                            <stop offset="0%" stop-color="#000000"/>
                            <stop offset="25%" stop-color="#fff"/>
                            <stop offset="75%" stop-color="#fff"/>
                            <stop offset="100%" stop-color="#000000"/>
                            </lineargradient>
                        <mask id="theMask">
                        <rect x="0" y="0" width="400" height="400" fill="url(#theGradient)" />  
                        </mask>
                        </defs> 
                        
                        <g mask="url(#theMask)"> 
                        <text id="nodeB0" transform="translate(150 250)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                        <text id="nodeB1" transform="translate(150 -150)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                        </g>
                    </svg>
                    <svg id="demo" xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
                        <defs>
                            <lineargradient id="theGradient" gradientUnits="userSpaceOnUse" x1="150" y1="0" x2="150" y2="300">
                            <stop offset="0%" stop-color="#000000"/>
                            <stop offset="25%" stop-color="#fff"/>
                            <stop offset="75%" stop-color="#fff"/>
                            <stop offset="100%" stop-color="#000000"/>
                            </lineargradient>
                        <mask id="theMask">
                        <rect x="0" y="0" width="400" height="400" fill="url(#theGradient)" />  
                        </mask>
                        </defs> 
                        
                        <g mask="url(#theMask)"> 
                        <text id="nodeC0" transform="translate(150 250)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                        <text id="nodeC1" transform="translate(150 -150)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                        </g>
                    </svg>
                    <svg id="demo" xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
                        <defs>
                            <lineargradient id="theGradient" gradientUnits="userSpaceOnUse" x1="150" y1="0" x2="150" y2="300">
                            <stop offset="0%" stop-color="#000000"/>
                            <stop offset="25%" stop-color="#fff"/>
                            <stop offset="75%" stop-color="#fff"/>
                            <stop offset="100%" stop-color="#000000"/>
                            </lineargradient>
                        <mask id="theMask">
                        <rect x="0" y="0" width="400" height="400" fill="url(#theGradient)" />  
                        </mask>
                        </defs> 
                        
                        <g mask="url(#theMask)"> 
                        <text id="nodeD0" transform="translate(150 250)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                        <text id="nodeD1" transform="translate(150 -150)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                        </g>
                    </svg>
                    <svg id="demo" xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
                        <defs>
                            <lineargradient id="theGradient" gradientUnits="userSpaceOnUse" x1="150" y1="0" x2="150" y2="300">
                            <stop offset="0%" stop-color="#000000"/>
                            <stop offset="25%" stop-color="#fff"/>
                            <stop offset="75%" stop-color="#fff"/>
                            <stop offset="100%" stop-color="#000000"/>
                            </lineargradient>
                        <mask id="theMask">
                        <rect x="0" y="0" width="400" height="400" fill="url(#theGradient)" />  
                        </mask>
                        </defs> 
                        
                        <g mask="url(#theMask)"> 
                        <text id="nodeE0" transform="translate(150 250)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                        <text id="nodeE1" transform="translate(150 -150)" text-anchor="middle" font-size="240" fill="#fff">9</text>
                        </g>
                    </svg>
                </div>
            </div>
            <div class="luckyGift">
                <div class="row justify-content-center">
                    {{-- <div class="neonText">Masquerade<br>Night</div> --}}
                    <div class="col-sm-2 mb-4 card bg-transparent border-0">
                        <div class="card-body">
                            <div class="card-image"><img id="placeholder0" src="img/prizes/{{ $prize->img }}.png" alt="whut" class=""></div>
                            <div class="card-text mt-2"></div>
                        </div>
                    </div>
                    <input id="img0" name="img0" type="hidden" value="{{ $prize->img }}"/>
                    <input id="winner" name="winner" type="hidden" value="{{ $user->number }}"/>
                    <input id="prizeId" name="prizeId" type="hidden" value="{{ $prize->id }}"/>
                </div>
            </div>
    </body>
</html>

<script src="{{asset('js/jquery-3.6.1.min.js')}}"></script>
<script src="{{asset('js/css-doodle.min.js')}}"></script>
<script src="{{asset('js/bootstrap.bundle.min.js')}}"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script>

<script>
    $("#curtain").click(openCurtains());

    function openCurtains(){
        $(".curtain-left").animate({borderBottomRightRadius: 100+"%"}, { queue: false, duration: 1590 }).animate({height: 10+"%"}, { queue: false, duration: 3500 });
        $(".curtain-right").animate({borderBottomLeftRadius: 100+"%"}, { queue: false, duration: 1590 }).animate({height: 10+"%"}, { queue: false, duration: 3500 });
        $(".curtain-left, .curtain-right").delay(3600).fadeOut("slow");
        setTimeout(function(){
            $("#curtainsWrapper, .curtain-left, .curtain-right").remove();
            $("#b3").removeAttr("hidden");
        },4000);
    };// end openCurtain()

    function flash(){
        flash_audio.currentTime = 0;
        flash_audio.play();
        $('.flash')
            .show()  //show the hidden div
            .animate({opacity: 0.6}, 300) 
            .fadeOut(300)
            .css({'opacity': 1});
    }

    var element = document.getElementsByClassName('slotNum');
    var all_gold = document.getElementsByClassName('grand');
    var last_gold = all_gold[all_gold.length - 1];
    var b3 = document.getElementById("b3");

    const audio = new Audio("/sound/spin.mp3");
    const confetti_audio = new Audio("/sound/award.mp3");
    const flash_audio = new Audio("/sound/flash.mp3");
    const normal_audio = new Audio("/sound/thud.mp3");
    // Code for Chrome, Safari and Opera

    function changePic(i){
        // var e = document.getElementById(i);
        if (element[i].src.match("img/5.png") && element[i].classList.contains("shake_gq")) {
            let parent = document.getElementsByClassName('animated-box');
            parent[i].style.background = "linear-gradient(0deg, black, #ffd700 80%) no-repeat";
            element[i].src = "img/4.png";
        }
        else if(element[i].src.match("img/4.png")){
            element[i].src = "img/prizes/" + document.getElementById("img" + i).value + ".png";
        }
        else{
            element[i].src = "img/5.png";
        }
    }



      "use strict";
    // background animation
    (function() {

    var Base, Particle, canvas, colors, context, draw, drawables, i, mouseX, mouseY, mouseVX, mouseVY, rand, update, click, min, max, colors, particles;

    min = 1;
    max = 8;
    particles = 200;
    colors = ["64, 32, 0", "250, 64, 0", "64, 0, 0", "200, 200, 200"];

    rand = function(a, b) {
        return Math.random() * (b - a) + a;
    };

    Particle = (function() {
        function Particle() {
        this.reset();
        }

        Particle.prototype.reset = function() {
        this.color = colors[~~(Math.random()*colors.length)];
        this.radius = rand(min, max);
        this.x = rand(0, canvas.width);
        this.y = rand(-20, canvas.height*0.5);
        this.vx = -5 + Math.random()*10;
        this.vy = 0.7 * this.radius;
        this.valpha = rand(0.02, 0.09);
        this.opacity = 0;
        this.life = 0;
        this.onupdate = undefined;
        this.type = "dust";
        };

        Particle.prototype.update = function() {
        this.x = (this.x + this.vx/3);
        this.y = (this.y + this.vy/3);

        if(this.opacity >=1 && this.valpha > 0) this.valpha *=-1;
        this.opacity += this.valpha/3;
        this.life += this.valpha/3;

        if(this.type === "dust")
            this.opacity = Math.min(1, Math.max(0, this.opacity));
        else
            this.opacity = 1;

        if(this.onupdate) this.onupdate();
        if(this.life < 0 || this.radius <= 0 || this.y > canvas.height){
            this.onupdate = undefined;
            this.reset();
        }
        };

        Particle.prototype.draw = function(c) {
        c.strokeStyle = "rgba(" + this.color + ", " + Math.min(this.opacity, 0.85) + ")";
        c.fillStyle = "rgba(" + this.color + ", " + Math.min(this.opacity, 0.65) + ")";
        c.beginPath();
        c.arc(this.x, this.y, this.radius, 2 * Math.PI, false);
        c.fill();
        c.stroke();
        };

        return Particle;

    })();

    mouseVX = mouseVY = mouseX = mouseY = 0;

    canvas = document.getElementById("bg");
    context = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    drawables = (function() {
        var _i, _results;
        _results = [];
        for (i = _i = 1; _i <= particles; i = ++_i) {
        _results.push(new Particle);
        }
        return _results;
    })();

    draw = function() {
        var d, _i, _len;
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        context.clearRect(0, 0, canvas.width, canvas.height)

        for (_i = 0, _len = drawables.length; _i < _len; _i++) {
        d = drawables[_i];
        d.draw(context);
        }
    };

    update = function() {
        var d, _i, _len, _results;
        _results = [];
        for (_i = 0, _len = drawables.length; _i < _len; _i++) {
        d = drawables[_i];
        _results.push(d.update());
        }
        return _results;
    };

    document.onmousemove = function(e) {
        mouseVX = mouseX;
        mouseVY = mouseY;
        mouseX = ~~e.pageX;
        mouseY = ~~e.pageY;
        mouseVX = ~~((mouseVX - mouseX)/2);
        mouseVY = ~~((mouseVY - mouseY)/2);

    };

    window.addEventListener('resize', draw, false);
        setInterval(draw, 1000 / 30);
        setInterval(update, 1000 / 60);
    }).call(this);

    function getRandNum(min = 1, max = 9) {
        return Math.floor(Math.random() * (max - min + 1) ) + min;
    }

    var tweenSecs = 1.3; //default 1.3
    var delaySecs = 0.25; //default 0.25
    const animArr = [];
        
    const resultAnimArr = [];
    var animA, animB, animC, animD, animE;
    
    var counterA = getRandNum(); //default 9
    var counterB = getRandNum();
    var counterC = getRandNum();
    var counterD = getRandNum();
    var counterE = getRandNum();

    var nA0 = document.querySelector("#nodeA0");
    var nA1 = document.querySelector("#nodeA1");
    var nB0 = document.querySelector("#nodeB0");
    var nB1 = document.querySelector("#nodeB1");
    var nC0 = document.querySelector("#nodeC0");
    var nC1 = document.querySelector("#nodeC1");
    var nD0 = document.querySelector("#nodeD0");
    var nD1 = document.querySelector("#nodeD1");
    var nE0 = document.querySelector("#nodeE0");
    var nE1 = document.querySelector("#nodeE1");

    function countDownA() {
        // counterA > 0 ? counterA-- : counterA = 9;
        counterA = getRandNum();
        nA1.textContent = counterA;

    animA = TweenMax.to("#nodeA0, #nodeA1", tweenSecs, { //default was 0.9
            y: "+=400",
            delay: delaySecs * Math.random(), //Math.random()
            ease: Power3.easeInOut,
            onComplete: swapNodesA
        })
    }

    function countDownB() {
        // counterB > 0 ? counterB-- : counterB = 9;
        counterB = getRandNum();
        nB1.textContent = counterB;

    animB = TweenMax.to("#nodeB0, #nodeB1", tweenSecs, { 
                y: "+=400",
                delay: delaySecs * Math.random(),
                ease: Power3.easeInOut,
                onComplete: swapNodesB
            })
    }

    function countDownC() {
        // counterC > 0 ? counterC-- : counterC = 9;
        counterC = getRandNum();
        nC1.textContent = counterC;

    animC = TweenMax.to("#nodeC0, #nodeC1", tweenSecs, {
                y: "+=400",
                delay: delaySecs * Math.random(),
                ease: Power3.easeInOut,
                onComplete: swapNodesC
            })
    }

    function countDownD() {
        // counterD > 0 ? counterD-- : counterD = 9;
        counterD = getRandNum();
        nD1.textContent = counterD;
        
    animD = TweenMax.to("#nodeD0, #nodeD1", tweenSecs, {
                y: "+=400",
                delay: delaySecs * Math.random(),
                ease: Power3.easeInOut,
                onComplete: swapNodesD
            })
    }

    function countDownE() {
        // counterE > 0 ? counterE-- : counterE = 9;
        counterE = getRandNum();
        nE1.textContent = counterE;

    animE = TweenMax.to("#nodeE0, #nodeE1", tweenSecs, {
                y: "+=400",
                delay: delaySecs * Math.random(),
                ease: Power3.easeInOut,
                onComplete: swapNodesE
            })
    }

    function swapNodesA() {
        nA0.textContent = counterA;
        TweenMax.set("#nodeA0, #nodeA1", { y: "-=400", onComplete: countDownA });
    }

    function swapNodesB() {
        nB0.textContent = counterB;
        TweenMax.set("#nodeB0, #nodeB1", { y: "-=400", onComplete: countDownB });
    }

    function swapNodesC() {
        nC0.textContent = counterC;
        TweenMax.set("#nodeC0, #nodeC1", { y: "-=400", onComplete: countDownC });
    }

    function swapNodesD() {
        nD0.textContent = counterD;
        TweenMax.set("#nodeD0, #nodeD1", { y: "-=400", onComplete: countDownD });
    }

    function swapNodesE() {
        nE0.textContent = counterE;
        TweenMax.set("#nodeE0, #nodeE1", { y: "-=400", onComplete: countDownE });
    }

    countDownA();
    countDownB();
    countDownC();
    countDownD();
    countDownE();

    async function jackpot(){
        let tempNumJackpot = $("#winner").val();
        arrJackpot = tempNumJackpot.split("");

        if(tweenSecs > 1){
            tweenSecs = 0.02;
            delaySecs = 0;
            rollnum_masq_audio.play();
        }else {
            tweenSecs = 1.3;
            delaySecs = 0.25;
        }

        setTimeout(function(){
            startAnimationsInManualSequence();
        },5000);
    }

    // Function to stop all animations and ensure they complete
    function stopAllAnimations() {
        const animationPromises = animArr.map(animation => {
            return new Promise(resolve => {
            animation.eventCallback("onComplete", () => {
                resolve();
            });
            animation.kill(); // Kill the animation to ensure it completes
            });
        });
    }

    // Function to start animations in sequence
    function startAnimationsInSequence() {
        const sequence = new TimelineMax();
        return;
        sequence.staggerTo(".box", 1, { x: 100, opacity: 0, ease: Power2.easeOut }, 0.2);
        sequence.to("#nodeA0, #nodeA1", 0.02, { //default was 0.9
            y: "+=400",
            delay:  0,
            ease: Power3.easeInOut,
            // onComplete: () => {
            //     nA0.textContent = arrJackpot[0];
            //     console.log(nA0.textContent);
            //     TweenMax.set("#nodeA0, #nodeA1", { y: "-=400"});
            // }
        })
        sequence.to("#nodeB0, #nodeB1", 0.02, { //default was 0.9
            y: "+=400",
            delay:  0.5 * 1,
            ease: Power3.easeInOut,
            // onComplete: () => {
            //     nB0.textContent = arrJackpot[1];
            //     console.log(nB0.textContent);
            //     TweenMax.set("#nodeB0, #nodeB1", { y: "-=400"});
            // }
        })
        sequence.to("#nodeC0, #nodeC1", 0.02, { //default was 0.9
            y: "+=400",
            delay:  0.5 * 2,
            ease: Power3.easeInOut,
            // onComplete: () => {
            //     nC0.textContent = arrJackpot[2];
            //     console.log(nC0.textContent);
            //     TweenMax.set("#nodeC0, #nodeC1", { y: "-=400"});
            // }
        })
        sequence.to("#nodeD0, #nodeD1", 0.02, { //default was 0.9
            y: "+=400",
            delay:  0.5 * 3,
            ease: Power3.easeInOut,
            // onComplete: () => {
            //     nD0.textContent = arrJackpot[3];
            //     console.log(nD0.textContent);
            //     TweenMax.set("#nodeD0, #nodeD1", { y: "-=400"});
            // }
        })
        sequence.to("#nodeE0, #nodeE1", 0.02, { //default was 0.9
            y: "+=400",
            delay:  0.5 * 4,
            ease: Power3.easeInOut,
            // onComplete: () => {
            //     nE0.textContent = arrJackpot[4];
            //     console.log(nE0.textContent);
            //     TweenMax.set("#nodeE0, #nodeE1", { y: "-=400"});
            // }
        })
        sequence.play();
    }

    const stopnum_masq_audio = new Audio("/sound/stopnum_masq.mp3");
    const rollnum_masq_audio = new Audio("/sound/rollnum_masq.mp3");
    function startAnimationsInManualSequence() {
        const delayConst = 0; //alt 0.25
        const animationConst = 0.02; //alt 3.2
        
        console.log(arrJackpot[0]);
        console.log(arrJackpot[1]);
        console.log(arrJackpot[2]);  
        console.log(arrJackpot[3]);
        console.log(arrJackpot[4]); 

        nA0.textContent = arrJackpot[0];
        nA1.textContent = arrJackpot[0];
        stopnum_masq_audio.currentTime = 0;
        stopnum_masq_audio.play();
        animA.kill();
    
        setTimeout(() => {
            nB0.textContent = arrJackpot[1]; 
            nB1.textContent = arrJackpot[1]; 
            stopnum_masq_audio.currentTime = 0;
            stopnum_masq_audio.play();
            animB.kill();
        }, 2000);
        setTimeout(() => { 
            nC0.textContent = arrJackpot[2]; 
            nC1.textContent = arrJackpot[2]; 
            stopnum_masq_audio.currentTime = 0;
            stopnum_masq_audio.play();
            animC.kill();
        }, 4000);
        setTimeout(() => {
            nD0.textContent = arrJackpot[3]; 
            nD1.textContent = arrJackpot[3]; 
            stopnum_masq_audio.currentTime = 0;
            stopnum_masq_audio.play();
            animD.kill();
        }, 6000);
        setTimeout(() => {
            nE0.textContent = arrJackpot[4]; 
            nE1.textContent = arrJackpot[4]; 
            stopnum_masq_audio.currentTime = 0;
            stopnum_masq_audio.play();
            animE.kill();
        }, 8000);
    }

    document.addEventListener("keydown", function(event) {
        if (event.key === "N" || event.key === "n") {
            let prize_id = $("#prizeId").val();
            let url = '/redraw/' + prize_id;    
            window.location.href = url
        }
    });
    
$(document).ready(function() {
    var frameRate = 60;
    var dt = 2.0 / frameRate;
    var DEG_TO_RAD = Math.PI / 180;
    var RAD_TO_DEG = 180 / Math.PI;
    var colors = [  
        ["#df0049", "#660671"],
        ["#00e857", "#005291"],
        ["#2bebbc", "#05798a"],
        ["#ffd200", "#b06c00"]
    ];

    function Vector2(_x, _y) {
        this.x = _x, this.y = _y;
        this.Length = function() {
            return Math.sqrt(this.SqrLength());
        }
        this.SqrLength = function() {
            return this.x * this.x + this.y * this.y;
        }
        this.Equals = function(_vec0, _vec1) {
            return _vec0.x == _vec1.x && _vec0.y == _vec1.y;
        }
        this.Add = function(_vec) {
            this.x += _vec.x;
            this.y += _vec.y;
        }
        this.Sub = function(_vec) {
            this.x -= _vec.x;
            this.y -= _vec.y;
        }
        this.Div = function(_f) {
            this.x /= _f;
            this.y /= _f;
        }
        this.Mul = function(_f) {
            this.x *= _f;
            this.y *= _f;
        }
        this.Normalize = function() {
            var sqrLen = this.SqrLength();
            if (sqrLen != 0) {
                var factor = 1.0 / Math.sqrt(sqrLen);
                this.x *= factor;
                this.y *= factor;
            }
        }
        this.Normalized = function() {
            var sqrLen = this.SqrLength();
            if (sqrLen != 0) {
                var factor = 1.0 / Math.sqrt(sqrLen);
                return new Vector2(this.x * factor, this.y * factor);
            }
            return new Vector2(0, 0);
        }
    }
    Vector2.Lerp = function(_vec0, _vec1, _t) {
        return new Vector2((_vec1.x - _vec0.x) * _t + _vec0.x, (_vec1.y - _vec0.y) * _t + _vec0.y);
    }
    Vector2.Distance = function(_vec0, _vec1) {
        return Math.sqrt(Vector2.SqrDistance(_vec0, _vec1));
    }
    Vector2.SqrDistance = function(_vec0, _vec1) {
        var x = _vec0.x - _vec1.x;
        var y = _vec0.y - _vec1.y;
        return (x * x + y * y + z * z);
    }
    Vector2.Scale = function(_vec0, _vec1) {
        return new Vector2(_vec0.x * _vec1.x, _vec0.y * _vec1.y);
    }
    Vector2.Min = function(_vec0, _vec1) {
        return new Vector2(Math.min(_vec0.x, _vec1.x), Math.min(_vec0.y, _vec1.y));
    }
    Vector2.Max = function(_vec0, _vec1) {
        return new Vector2(Math.max(_vec0.x, _vec1.x), Math.max(_vec0.y, _vec1.y));
    }
    Vector2.ClampMagnitude = function(_vec0, _len) {
        var vecNorm = _vec0.Normalized;
        return new Vector2(vecNorm.x * _len, vecNorm.y * _len);
    }
    Vector2.Sub = function(_vec0, _vec1) {
        return new Vector2(_vec0.x - _vec1.x, _vec0.y - _vec1.y, _vec0.z - _vec1.z);
    }

    function EulerMass(_x, _y, _mass, _drag) {
        this.position = new Vector2(_x, _y);
        this.mass = _mass;
        this.drag = _drag;
        this.force = new Vector2(0, 0);
        this.velocity = new Vector2(0, 0);
        this.AddForce = function(_f) {
            this.force.Add(_f);
        }
        this.Integrate = function(_dt) {
            var acc = this.CurrentForce(this.position);
            acc.Div(this.mass);
            var posDelta = new Vector2(this.velocity.x, this.velocity.y);
            posDelta.Mul(_dt);
            this.position.Add(posDelta);
            acc.Mul(_dt);
            this.velocity.Add(acc);
            this.force = new Vector2(0, 0);
        }
        this.CurrentForce = function(_pos, _vel) {
            var totalForce = new Vector2(this.force.x, this.force.y);
            var speed = this.velocity.Length();
            var dragVel = new Vector2(this.velocity.x, this.velocity.y);
            dragVel.Mul(this.drag * this.mass * speed);
            totalForce.Sub(dragVel);
            return totalForce;
        }
    }

    function ConfettiPaper(_x, _y) {
        this.pos = new Vector2(_x, _y);
        this.rotationSpeed = Math.random() * 600 + 800;
        this.angle = DEG_TO_RAD * Math.random() * 360;
        this.rotation = DEG_TO_RAD * Math.random() * 360;
        this.cosA = 1.0;
        this.size = 5.0;
        this.oscillationSpeed = Math.random() * 1.5 + 0.5;
        this.xSpeed = 40.0;
        this.ySpeed = Math.random() * 60 + 50.0;
        this.corners = new Array();
        this.time = Math.random();
        var ci = Math.round(Math.random() * (colors.length - 1));
        this.frontColor = colors[ci][0];
        this.backColor = colors[ci][1];
        for (var i = 0; i < 4; i++) {
            var dx = Math.cos(this.angle + DEG_TO_RAD * (i * 90 + 45));
            var dy = Math.sin(this.angle + DEG_TO_RAD * (i * 90 + 45));
            this.corners[i] = new Vector2(dx, dy);
        }
        this.Update = function(_dt) {
            this.time += _dt;
            this.rotation += this.rotationSpeed * _dt;
            this.cosA = Math.cos(DEG_TO_RAD * this.rotation);
            this.pos.x += Math.cos(this.time * this.oscillationSpeed) * this.xSpeed * _dt
            this.pos.y += this.ySpeed * _dt;
            if (this.pos.y > ConfettiPaper.bounds.y) {
                this.pos.x = Math.random() * ConfettiPaper.bounds.x;
                this.pos.y = 0;
            }
        }
        this.Draw = function(_g) {
            if (this.cosA > 0) {
                _g.fillStyle = this.frontColor;
            } else {
                _g.fillStyle = this.backColor;
            }
            _g.beginPath();
            _g.moveTo(this.pos.x + this.corners[0].x * this.size, this.pos.y + this.corners[0].y * this.size * this.cosA);
            for (var i = 1; i < 4; i++) {
                _g.lineTo(this.pos.x + this.corners[i].x * this.size, this.pos.y + this.corners[i].y * this.size * this.cosA);
            }
            _g.closePath();
            _g.fill();
        }
    }
    ConfettiPaper.bounds = new Vector2(0, 0);

    function ConfettiRibbon(_x, _y, _count, _dist, _thickness, _angle, _mass, _drag) {
        this.particleDist = _dist;
        this.particleCount = _count;
        this.particleMass = _mass;
        this.particleDrag = _drag;
        this.particles = new Array();
        var ci = Math.round(Math.random() * (colors.length - 1));
        this.frontColor = colors[ci][0];
        this.backColor = colors[ci][1];
        this.xOff = Math.cos(DEG_TO_RAD * _angle) * _thickness;
        this.yOff = Math.sin(DEG_TO_RAD * _angle) * _thickness;
        this.position = new Vector2(_x, _y);
        this.prevPosition = new Vector2(_x, _y);
        this.velocityInherit = Math.random() * 2 + 4;
        this.time = Math.random() * 100;
        this.oscillationSpeed = Math.random() * 2 + 2;
        this.oscillationDistance = Math.random() * 40 + 40;
        this.ySpeed = Math.random() * 40 + 80;
        for (var i = 0; i < this.particleCount; i++) {
            this.particles[i] = new EulerMass(_x, _y - i * this.particleDist, this.particleMass, this.particleDrag);
        }
        this.Update = function(_dt) {
            var i = 0;
            this.time += _dt * this.oscillationSpeed;
            this.position.y += this.ySpeed * _dt;
            this.position.x += Math.cos(this.time) * this.oscillationDistance * _dt;
            this.particles[0].position = this.position;
            var dX = this.prevPosition.x - this.position.x;
            var dY = this.prevPosition.y - this.position.y;
            var delta = Math.sqrt(dX * dX + dY * dY);
            this.prevPosition = new Vector2(this.position.x, this.position.y);
            for (i = 1; i < this.particleCount; i++) {
                var dirP = Vector2.Sub(this.particles[i - 1].position, this.particles[i].position);
                dirP.Normalize();
                dirP.Mul((delta / _dt) * this.velocityInherit);
                this.particles[i].AddForce(dirP);
            }
            for (i = 1; i < this.particleCount; i++) {
                this.particles[i].Integrate(_dt);
            }
            for (i = 1; i < this.particleCount; i++) {
                var rp2 = new Vector2(this.particles[i].position.x, this.particles[i].position.y);
                rp2.Sub(this.particles[i - 1].position);
                rp2.Normalize();
                rp2.Mul(this.particleDist);
                rp2.Add(this.particles[i - 1].position);
                this.particles[i].position = rp2;
            }
            if (this.position.y > ConfettiRibbon.bounds.y + this.particleDist * this.particleCount) {
                this.Reset();
            }
        }
        this.Reset = function() {
            this.position.y = -Math.random() * ConfettiRibbon.bounds.y;
            this.position.x = Math.random() * ConfettiRibbon.bounds.x;
            this.prevPosition = new Vector2(this.position.x, this.position.y);
            this.velocityInherit = Math.random() * 2 + 4;
            this.time = Math.random() * 100;
            this.oscillationSpeed = Math.random() * 2.0 + 1.5;
            this.oscillationDistance = Math.random() * 40 + 40;
            this.ySpeed = Math.random() * 40 + 80;
            var ci = Math.round(Math.random() * (colors.length - 1));
            this.frontColor = colors[ci][0];
            this.backColor = colors[ci][1];
            this.particles = new Array();
            for (var i = 0; i < this.particleCount; i++) {
                this.particles[i] = new EulerMass(this.position.x, this.position.y - i * this.particleDist, this.particleMass, this.particleDrag);
            }
        }
        this.Draw = function(_g) {
            for (var i = 0; i < this.particleCount - 1; i++) {
                var p0 = new Vector2(this.particles[i].position.x + this.xOff, this.particles[i].position.y + this.yOff);
                var p1 = new Vector2(this.particles[i + 1].position.x + this.xOff, this.particles[i + 1].position.y + this.yOff);
                if (this.Side(this.particles[i].position.x, this.particles[i].position.y, this.particles[i + 1].position.x, this.particles[i + 1].position.y, p1.x, p1.y) < 0) {
                    _g.fillStyle = this.frontColor;
                    _g.strokeStyle = this.frontColor;
                } else {
                    _g.fillStyle = this.backColor;
                    _g.strokeStyle = this.backColor;
                }
                if (i == 0) {
                    _g.beginPath();
                    _g.moveTo(this.particles[i].position.x, this.particles[i].position.y);
                    _g.lineTo(this.particles[i + 1].position.x, this.particles[i + 1].position.y);
                    _g.lineTo((this.particles[i + 1].position.x + p1.x) * 0.5, (this.particles[i + 1].position.y + p1.y) * 0.5);
                    _g.closePath();
                    _g.stroke();
                    _g.fill();
                    _g.beginPath();
                    _g.moveTo(p1.x, p1.y);
                    _g.lineTo(p0.x, p0.y);
                    _g.lineTo((this.particles[i + 1].position.x + p1.x) * 0.5, (this.particles[i + 1].position.y + p1.y) * 0.5);
                    _g.closePath();
                    _g.stroke();
                    _g.fill();
                } else if (i == this.particleCount - 2) {
                    _g.beginPath();
                    _g.moveTo(this.particles[i].position.x, this.particles[i].position.y);
                    _g.lineTo(this.particles[i + 1].position.x, this.particles[i + 1].position.y);
                    _g.lineTo((this.particles[i].position.x + p0.x) * 0.5, (this.particles[i].position.y + p0.y) * 0.5);
                    _g.closePath();
                    _g.stroke();
                    _g.fill();
                    _g.beginPath();
                    _g.moveTo(p1.x, p1.y);
                    _g.lineTo(p0.x, p0.y);
                    _g.lineTo((this.particles[i].position.x + p0.x) * 0.5, (this.particles[i].position.y + p0.y) * 0.5);
                    _g.closePath();
                    _g.stroke();
                    _g.fill();
                } else {
                    _g.beginPath();
                    _g.moveTo(this.particles[i].position.x, this.particles[i].position.y);
                    _g.lineTo(this.particles[i + 1].position.x, this.particles[i + 1].position.y);
                    _g.lineTo(p1.x, p1.y);
                    _g.lineTo(p0.x, p0.y);
                    _g.closePath();
                    _g.stroke();
                    _g.fill();
                }
            }
        }
        this.Side = function(x1, y1, x2, y2, x3, y3) {
            return ((x1 - x2) * (y3 - y2) - (y1 - y2) * (x3 - x2));
        }
    }
    ConfettiRibbon.bounds = new Vector2(0, 0);
    confetti = {};
    confetti.Context = function(parent) {
        var i = 0;
        var canvasParent = document.getElementById(parent);
        var canvas = document.createElement('canvas');
        canvas.width = canvasParent.offsetWidth;
        canvas.height = canvasParent.offsetHeight;
        canvasParent.appendChild(canvas);
        var context = canvas.getContext('2d');
        var interval = null;
        var confettiRibbonCount = 7;
        var rpCount = 30;
        var rpDist = 8.0;
        var rpThick = 8.0;
        var confettiRibbons = new Array();
        ConfettiRibbon.bounds = new Vector2(canvas.width, canvas.height);
        for (i = 0; i < confettiRibbonCount; i++) {
            confettiRibbons[i] = new ConfettiRibbon(Math.random() * canvas.width, -Math.random() * canvas.height * 2, rpCount, rpDist, rpThick, 45, 1, 0.05);
        }
        var confettiPaperCount = 25;
        var confettiPapers = new Array();
        ConfettiPaper.bounds = new Vector2(canvas.width, canvas.height);
        for (i = 0; i < confettiPaperCount; i++) {
            confettiPapers[i] = new ConfettiPaper(Math.random() * canvas.width, Math.random() * canvas.height);
        }
        this.resize = function() {
            canvas.width = canvasParent.offsetWidth;
            canvas.height = canvasParent.offsetHeight;
            ConfettiPaper.bounds = new Vector2(canvas.width, canvas.height);
            ConfettiRibbon.bounds = new Vector2(canvas.width, canvas.height);
        }
        this.start = function() {
            this.stop()
            var context = this
            this.interval = setInterval(function() {
                confetti.update();
            }, 1000.0 / frameRate)
        }
        this.stop = function() {
            clearInterval(this.interval);
        }
        this.update = function() {
            var i = 0;
            context.clearRect(0, 0, canvas.width, canvas.height);
            for (i = 0; i < confettiPaperCount; i++) {
                confettiPapers[i].Update(dt);
                confettiPapers[i].Draw(context);
            }
            for (i = 0; i < confettiRibbonCount; i++) {
                confettiRibbons[i].Update(dt);
                confettiRibbons[i].Draw(context);
            }
        }
    }
    var confetti = new confetti.Context('confetti');
    function startConfetti(){ 
        // confetti_audio.play();

        $("#confetti").on("click", function(e){
            location.reload(true);
        })

        confetti.start();
        $(window).resize(function() {
            confetti.resize();
        });
    }

    var refresh = false;
    $("#confetti").on("click", function(e){
        // $("#confetti").show();
        // $(window).trigger('resize');
        
        e.preventDefault();
        $(this).off();

        //this.hidden = true;
        // startConfetti();
        jackpot();
        // someSound();
    });

    function someSound(){
        // audio.play();
        confetti_audio.play();

        for(let i = 0; i < element.length; i++){
            //console.log(element[i].classList.contains('gold'));
            //slot1 = setInterval(spin1, 50);
            element[i].style.animationDelay = 0.9 * i + "s";

            if(element[i].classList.contains('add_gold')){
                element[i].classList.remove('shake_gq'); // reset animation
                void element[i].offsetWidth; // trigger reflow
                element[i].classList.add('shake_gq'); // start animation
                element[i].addEventListener("webkitAnimationEnd", function(){
                    changePic(i);
                    element[i].classList.remove('shake_gq'); // reset animation
                    element[i].classList.remove('gold'); // reset animation
                    void element[i].offsetWidth; // trigger reflow
                    element[i].classList.add('gold'); // start animation
                    element[i].addEventListener("webkitAnimationEnd", function(){
                        flash();
                        changePic(i);
                        element[i].classList.remove('gold'); // start animation
                        element[i].src = "img/prizes/" + document.getElementById("img" + i).value + ".png";
                        element[i].style.height = '290px';
                        element[i].style.width = '290px';

                        document.getElementById("numVal" + i).hidden = false;
                        document.getElementById("numVal" + i).disabled = false;
                        document.getElementById("numGif" + i).hidden = true;

                        console.log(element[i].isEqualNode(last_gold));
                        
                        if(element[i].isEqualNode(last_gold)){
                            startConfetti();
                        }
                    });
                });
            }else{
                element[i].classList.remove('blue'); // reset animation
                void element[i].offsetWidth; // trigger reflow
                element[i].classList.add('blue'); // start animation
                element[i].addEventListener("webkitAnimationEnd", function(){
                    normal_audio.currentTime = 0;
                    normal_audio.play();
                    changePic(i);
                    
                    element[i].src = "img/prizes/" + document.getElementById("img" + i).value + ".png";
                    element[i].style.height = '290px';
                    element[i].style.width = '290px';

                    document.getElementById("numVal" + i).hidden = false;
                    document.getElementById("numVal" + i).disabled = false;
                    document.getElementById("numGif" + i).hidden = true;

                    if(i + 1 == element.length && $('.gold').length == 0){
                        startConfetti();
                    }
                });
            }
        };
    }
});
</script>
